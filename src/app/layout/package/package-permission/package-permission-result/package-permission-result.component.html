<form [formGroup]="packagePermissionReviewForm" *ngIf="packagePermissionReviewForm">
    <div class="boder-table mt-3">
        <div class="">
            <div class="media-header" style="text-align: right; padding-right: 1rem; margin-top: -0.75rem;">
                <span class="action-bar alignment-but">
                    <button type="submit" class="btn btn-primary" (click)="onSubmit()">Lưu
                    </button>
                    <button type="submit" class="btn btn-secondary">Hủy
                    </button>
                </span>
            </div>
        </div>
        <div style="margin-top: -1rem; margin-right: 1rem">
            <h5 class="mb-3 text-uppercase">Quản lý kết quả dự thầu</h5>
            <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="table-selection stripe hover">
                <thead>
                    <tr style="width: 100%">
                        <th style="width: 280px !important">
                            <div class="text-center">Kết quả dự thầu</div>
                        </th>
                        <th></th>
                        <th>
                            <div class="text-center">Chọn KQDT (Trúng/Trật/Huỷ)</div>
                        </th>
                        <th>
                            <div class="text-center">Upload KQDT (Trúng/Trật)</div>
                        </th>
                        <th>
                            <div class="text-center">Tải xuống KQDT</div>
                        </th>
                        <th>
                            <div class="text-center">Tải template</div>
                        </th>
                        <th>
                            <div class="text-center">Xóa KQDT</div>
                        </th>
                        <th>
                            <div class="text-center">Thông báo đến P.Hợp đồng</div>
                        </th>
                        <th>
                            <div class="text-center">Xem email phản hồi</div>
                        </th>
                        <th>
                            <div class="text-center">Thông báo đến Stakeholders</div>
                        </th>
                        <th>
                            <div class="text-center">Xem email thông báo trúng thầu</div>
                        </th>
                        <th>
                            <div class="text-center">Chuyển giao tài liệu</div>
                        </th>
                        <th>
                            <div class="text-center">Xem email chuyển giao</div>
                        </th>

                    </tr>
                </thead>
                <tbody [formGroupName]="'KetQuaDuThau'">
                    <ng-container [formArrayName]="'permission'">
                        <tr *ngFor="let item of packagePermissionReviewForm.get('KetQuaDuThau').get('permission').controls; let i = index;" [formGroupName]="i"
                            [class.odd]="i % 2 == 0">
                            <td>
                                <div class="grid-container-3">
                                    <div class="btn-icon btn-icon-plus" (click)="addFormArrayItem(listFormData[0], {})">
                                        <i class="fa fa-plus" style="margin-top: 2px" aria-hidden="true"></i>
                                    </div>
                                    <div class="btn-icon btn-icon-minus" [class.invisible]="i == 0" (click)="removeFormItem(listFormData[0], i)">
                                        <i class="fa fa-minus" style="margin-top: 2px" aria-hidden="true" *ngIf="i != 0"></i>
                                    </div>
                                    <div>
                                        <span style="margin-left: 12px" class="custom-dropdown w-100">
                                            <select class="form-control" formControlName="userName">
                                                <option [ngValue]="null">--Chọn--</option>
                                                <option *ngFor="let user of listBidGroupUser" [value]="user.id">{{user.desc}}</option>
                                            </select>
                                        </span>
                                    </div>
                                </div>
                            </td>
                            <td class="text-center">
                                <label class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" (click)="checkAll($event.target.checked, 'KetQuaDuThau', i)">
                                    <span class="custom-control-indicator"></span>
                                </label>
                            </td>
                            <td class="text-center">
                                <label class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" formControlName="ChonKQDT">
                                    <span class="custom-control-indicator"></span>
                                </label>
                            </td>
                            <td class="text-center">
                                <label class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" formControlName="UploadKQDT">
                                    <span class="custom-control-indicator"></span>
                                </label>
                            </td>
                            <td class="text-center">
                                <label class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" formControlName="TaiXuongKQDT">
                                    <span class="custom-control-indicator"></span>
                                </label>
                            </td>
                            <td class="text-center">
                                <label class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" formControlName="TaiTemplate">
                                    <span class="custom-control-indicator"></span>
                                </label>
                            </td>
                            <td class="text-center">
                                <label class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" formControlName="XoaKQDT">
                                    <span class="custom-control-indicator"></span>
                                </label>
                            </td>
                            <td class="text-center">
                                <label class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" formControlName="ThongBaoDenPhongHopDong">
                                    <span class="custom-control-indicator"></span>
                                </label>
                            </td>
                            <td class="text-center">
                                <label class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" formControlName="XemEmailPhanHoi">
                                    <span class="custom-control-indicator"></span>
                                </label>
                            </td>
                            <td class="text-center">
                                <label class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" formControlName="ThongBaoStakeholders">
                                    <span class="custom-control-indicator"></span>
                                </label>
                            </td>
                            <td class="text-center">
                                <label class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" formControlName="XemMailThongBaoTrungThau">
                                    <span class="custom-control-indicator"></span>
                                </label>
                            </td>
                            <td class="text-center">
                                <label class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" formControlName="ChuyenGiaoTaiLieu">
                                    <span class="custom-control-indicator"></span>
                                </label>
                            </td>
                            <td class="text-center">
                                <label class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" formControlName="XemMailChuyenGiao">
                                    <span class="custom-control-indicator"></span>
                                </label>
                            </td>
                        </tr>
                    </ng-container>
                </tbody>
            </table>

            <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="table-selection stripe hover mt-4">
                <thead>
                    <tr style="width: 100%">
                        <th style="width: 280px !important">
                            <div class="text-center">Hợp đồng ký kết</div>
                        </th>
                        <th></th>
                        <th>
                            <div class="text-center">Thêm mới hợp đồng</div>
                        </th>
                        <th>
                            <div class="text-center">Tải xuống hợp đồng</div>
                        </th>
                        <th>
                            <div class="text-center">Xóa hợp đồng</div>
                        </th>
                    </tr>
                </thead>
                <tbody [formGroupName]="'HopDongKiKet'">
                    <ng-container [formArrayName]="'permission'">
                        <tr *ngFor="let item of packagePermissionReviewForm.get('HopDongKiKet').get('permission').controls; let i = index;" [formGroupName]="i"
                            [class.odd]="i % 2 == 0">
                            <td>
                                <div class="grid-container-3">
                                    <div class="btn-icon btn-icon-plus" (click)="addFormArrayItem(listFormData[1], {})">
                                        <i class="fa fa-plus" style="margin-top: 2px" aria-hidden="true"></i>
                                    </div>
                                    <div class="btn-icon btn-icon-minus" [class.invisible]="i == 0" (click)="removeFormItem(listFormData[1], i)">
                                        <i class="fa fa-minus" style="margin-top: 2px" aria-hidden="true" *ngIf="i != 0"></i>
                                    </div>
                                    <div>
                                        <span style="margin-left: 12px" class="custom-dropdown w-100">
                                            <select class="form-control" formControlName="userName">
                                                <option [ngValue]="null">--Chọn--</option>
                                                <option *ngFor="let user of listBidGroupUser" [value]="user.id">{{user.desc}}</option>
                                            </select>
                                        </span>
                                    </div>
                                </div>
                            </td>
                            <td class="text-center">
                                <label class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" (click)="checkAll($event.target.checked, 'HopDongKiKet', i)">
                                    <span class="custom-control-indicator"></span>
                                </label>
                            </td>
                            <td class="text-center">
                                <label class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" formControlName="ThemMoiHD">
                                    <span class="custom-control-indicator"></span>
                                </label>
                            </td>
                            <td class="text-center">
                                <label class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" formControlName="TaiXuongHD">
                                    <span class="custom-control-indicator"></span>
                                </label>
                            </td>
                            <td class="text-center">
                                <label class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" formControlName="XoaHD">
                                    <span class="custom-control-indicator"></span>
                                </label>
                            </td>
                        </tr>
                    </ng-container>
                </tbody>
            </table>


            <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="table-selection stripe hover mt-4">
                <thead>
                    <tr style="width: 100%">
                        <th style="width: 280px !important">
                            <div class="text-center">Họp kick-off</div>
                        </th>
                        <th></th>
                        <th>
                            <div class="text-center">Thông báo họp kick-off</div>
                        </th>
                        <th>
                            <div class="text-center">Xem danh sách email đã gửi</div>
                        </th>
                        <th>
                            <div class="text-center">Upload BB cuộc họp</div>
                        </th>
                        <th>
                            <div class="text-center">Tải xuống BB cuộc họp</div>
                        </th>
                        <th>
                            <div class="text-center">Xoá BB cuộc họp</div>
                        </th>
                        <th>
                            <div class="text-center">Upload file Presentation</div>
                        </th>
                        <th>
                            <div class="text-center">Tải xuống file Presentation</div>
                        </th>
                        <th>
                            <div class="text-center">Xoá file Presentation</div>
                        </th>

                    </tr>
                </thead>
                <tbody [formGroupName]="'HopKickOff'">
                    <ng-container [formArrayName]="'permission'">
                        <tr *ngFor="let item of packagePermissionReviewForm.get('HopKickOff').get('permission').controls; let i = index;" [formGroupName]="i"
                            [class.odd]="i % 2 == 0">
                            <td>
                                <div class="grid-container-3">
                                    <div class="btn-icon btn-icon-plus" (click)="addFormArrayItem(listFormData[2], {})">
                                        <i class="fa fa-plus" style="margin-top: 2px" aria-hidden="true"></i>
                                    </div>
                                    <div class="btn-icon btn-icon-minus" [class.invisible]="i == 0" (click)="removeFormItem(listFormData[2], i)">
                                        <i class="fa fa-minus" style="margin-top: 2px" aria-hidden="true" *ngIf="i != 0"></i>
                                    </div>
                                    <div>
                                        <span style="margin-left: 12px" class="custom-dropdown w-100">
                                            <select class="form-control" formControlName="userName">
                                                <option [ngValue]="null">--Chọn--</option>
                                                <option *ngFor="let user of listBidGroupUser" [value]="user.id">{{user.desc}}</option>
                                            </select>
                                        </span>
                                    </div>
                                </div>
                            </td>
                            <td class="text-center">
                                <label class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" (click)="checkAll($event.target.checked, 'HopKickOff', i)">
                                    <span class="custom-control-indicator"></span>
                                </label>
                            </td>
                            <td class="text-center">
                                <label class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" formControlName="ThongBaoHopKickoff">
                                    <span class="custom-control-indicator"></span>
                                </label>
                            </td>
                            <td class="text-center">
                                <label class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" formControlName="XemDanhSachEmailDaGui">
                                    <span class="custom-control-indicator"></span>
                                </label>
                            </td>
                            <td class="text-center">
                                <label class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" formControlName="UploadBBCuocHop">
                                    <span class="custom-control-indicator"></span>
                                </label>
                            </td>
                            <td class="text-center">
                                <label class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" formControlName="TaiXuongBBCuocHop">
                                    <span class="custom-control-indicator"></span>
                                </label>
                            </td>
                            <td class="text-center">
                                <label class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" formControlName="XoaBBCuocHop">
                                    <span class="custom-control-indicator"></span>
                                </label>
                            </td>
                            <td class="text-center">
                                <label class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" formControlName="UploadFilePresentation">
                                    <span class="custom-control-indicator"></span>
                                </label>
                            </td>
                            <td class="text-center">
                                <label class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" formControlName="TaiXuongFilePresentation">
                                    <span class="custom-control-indicator"></span>
                                </label>
                            </td>
                            <td class="text-center">
                                <label class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" formControlName="XoaFilePresentation">
                                    <span class="custom-control-indicator"></span>
                                </label>
                            </td>
        

                        </tr>
                    </ng-container>
                </tbody>
            </table>
        </div>
    </div>

</form>
<!-- <ngx-spinner bdColor="rgba(51, 51, 51, 0.7)" size="default" color="#fff" type="ball-scale"></ngx-spinner> -->