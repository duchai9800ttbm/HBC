<form [formGroup]="trafficForm" class="detail-info">
    <div id="step2" class="step-info">
        <h6 class="big-title font-weight-bold">3.&nbsp;giao thông và lối vào công trường (transportation and site
            entrance condition)</h6>
        <div>
            <div class="detail-each-title">
                <h6 class="small-title font-weight-bold">3.1 Những chi tiết địa hình/ Topography</h6>
                <div class="main-detail">
                    <div class="text-des-input">
                        <div class="img-demo-des">
                            <label class="unset-margin w-100">Khó khăn/Disadvantage</label>
                        </div>
                        <div class="img-demo-des">
                            <input class="w-50" type="text" placeholder="Nhập text" formControlName="chiTietDiaHinhKhoKhanDesc"
                                [ngClass]="{'view-mode-control': isViewMode}">
                        </div>
                        <div class="image-demo-img">
                            <input type="file" accept="image/*" multiple #uploaDisadvantage (change)="uploaDisadvantageImage($event)">

                            <ng-container *ngFor="let url of disadvantageImageUrls; index as k">
                                <div class="display-img" (click)="viewFullScreenImage(disadvantageImageUrls, k)">
                                    <img [src]="url.largeSizeUrl">
                                    <div class="icon-delete-image" [ngClass]="{'d-none': isViewMode}" (click)="deleteDisadvantageImage(url)">
                                        <i class="fa fa-times delete-icon" aria-hidden="true"></i>
                                    </div>
                                </div>
                            </ng-container>
                            <div class="perspective-image cursor-pointer" [ngClass]="{'d-none': isViewMode}" (click)="uploaDisadvantage.click()">
                                <i class="fa fa-plus" aria-hidden="true"></i>
                                <p>Image</p>
                            </div>
                        </div>

                    </div>

                    <div class="text-des-input">
                        <div class="img-demo-des">
                            <label class="unset-margin w-100">Thuận lợi/ Advantage</label>
                        </div>
                        <div class="img-demo-des">
                            <input class="w-50" type="text" placeholder="Nhập text" formControlName="chiTietDiaHinhThuanLoiDesc"
                                [ngClass]="{'view-mode-control': isViewMode}">
                        </div>
                        <div class="image-demo-img">
                            <input type="file" #uploaAdvantage multiple (change)="uploaAdvantageImage($event)">

                            <ng-container *ngFor="let url of advantageImageUrls; index as k">
                                <div class="display-img" (click)="viewFullScreenImage(advantageImageUrls, k)">
                                    <img [src]="url.largeSizeUrl">
                                    <div class="icon-delete-image" [ngClass]="{'d-none': isViewMode}" (click)="deleteAdvantageImage(url)">
                                        <i class="fa fa-times delete-icon" aria-hidden="true"></i>
                                    </div>
                                </div>
                            </ng-container>

                            <div class="perspective-image cursor-pointer" [ngClass]="{'d-none': isViewMode}" (click)="uploaAdvantage.click()">
                                <i class="fa fa-plus" aria-hidden="true"></i>
                                <p>Image</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="detail-each-title">
        <h6 class="small-title font-weight-bold">3.2 Lối vào công trường/ Site entrance</h6>
        <div class="main-detail">
            <div class="text-des-input">
                <div class="img-demo-des">
                    <label class="unset-margin w-100">Hướng vào công trường/ Direction of the site entrance</label>
                </div>
                <div class="img-demo-des">
                    <input class="w-50" type="text" placeholder="Nhập text" formControlName="huongVaoCongTruongDesc"
                        [ngClass]="{'view-mode-control': isViewMode}">
                </div>
                <div class="image-demo-img">
                    <input type="file" accept="image/*" multiple #uploadDirection (change)="uploadDirectionImage($event)">

                    <ng-container *ngFor="let url of directionImageUrls; index as k">
                        <div class="display-img" (click)="viewFullScreenImage(directionImageUrls, k)">
                            <img [src]="url.largeSizeUrl">
                            <div class="icon-delete-image" [ngClass]="{'d-none': isViewMode}" (click)="deleteDirectionImage(url)">
                                <i class="fa fa-times delete-icon" aria-hidden="true"></i>
                            </div>
                        </div>
                    </ng-container>
                    <div class="perspective-image cursor-pointer" [ngClass]="{'d-none': isViewMode}" (click)="uploadDirection.click()">
                        <i class="fa fa-plus" aria-hidden="true"></i>
                        <p>Image</p>
                    </div>
                </div>
            </div>

            <div class="text-des-input">
                <div class="img-demo-des">
                    <label class="unset-margin w-100">Đường hiện có trên công trường/ Existing road on site</label>
                </div>
                <div class="img-demo-des">
                    <input class="w-50" type="text" placeholder="Nhập text" formControlName="duongHienCoTrenCongTruongDesc"
                        [ngClass]="{'view-mode-control': isViewMode}">
                </div>
                <div class="image-demo-img">
                    <input type="file" accept="image/*" multiple #uploadExisting (change)="uploadExistingImage($event)">

                    <ng-container *ngFor="let url of existingImageUrls; index as k">
                        <div class="display-img" (click)="viewFullScreenImage(existingImageUrls, k)">
                            <img [src]="url.largeSizeUrl">
                            <div class="icon-delete-image" [ngClass]="{'d-none': isViewMode}" (click)="deleteExistingImage(url)">
                                <i class="fa fa-times delete-icon" aria-hidden="true"></i>
                            </div>
                        </div>
                    </ng-container>
                    <div class="perspective-image cursor-pointer" [ngClass]="{'d-none': isViewMode}" (click)="uploadExisting.click()">
                        <i class="fa fa-plus" aria-hidden="true"></i>
                        <p>Image</p>
                    </div>
                </div>
            </div>

            <div class="text-des-input">
                <div class="img-demo-des">
                    <label class="unset-margin w-100">Yêu cầu đường tạm/ Temporary road's requirement</label>
                </div>
                <div class="img-demo-des">
                    <input class="w-50" type="text" placeholder="Nhập text" formControlName="yeuCauDuongTamDesc"
                        [ngClass]="{'view-mode-control': isViewMode}">
                </div>
                <div class="image-demo-img">
                    <input type="file" accept="image/*" multiple #uploadRoad (change)="uploadRoadImage($event)">

                    <ng-container *ngFor="let url of roadImageUrls; index as k">
                        <div class="display-img" (click)="viewFullScreenImage(roadImageUrls, k)">
                            <img [src]="url.largeSizeUrl">
                            <div class="icon-delete-image" [ngClass]="{'d-none': isViewMode}" (click)="deleteRoadImage(url)">
                                <i class="fa fa-times delete-icon" aria-hidden="true"></i>
                            </div>
                        </div>
                    </ng-container>
                    <div class="perspective-image cursor-pointer" [ngClass]="{'d-none': isViewMode}" (click)="uploadRoad.click()">
                        <i class="fa fa-plus" aria-hidden="true"></i>
                        <p>Image</p>
                    </div>
                </div>
            </div>
            <div class="text-des-input">
                <div class="img-demo-des">
                    <label class="unset-margin w-100">Yêu cầu về hàng rào tạm/ Temporary fence's requirement</label>
                </div>
                <div class="img-demo-des">
                    <input class="w-50" type="text" placeholder="Nhập text" formControlName="yeuCauHangRaoDesc"
                        [ngClass]="{'view-mode-control': isViewMode}">
                </div>
                <div class="image-demo-img">
                    <input type="file" accept="image/*" multiple #uploadFence (change)="uploadFenceImage($event)">

                    <ng-container *ngFor="let url of fenceImageUrls; index as k">
                        <div class="display-img" (click)="viewFullScreenImage(fenceImageUrls, k)">
                            <img [src]="url.largeSizeUrl">
                            <div class="icon-delete-image" [ngClass]="{'d-none': isViewMode}" (click)="deleteFenceImage(url)">
                                <i class="fa fa-times delete-icon" aria-hidden="true"></i>
                            </div>
                        </div>
                    </ng-container>
                    <div class="perspective-image cursor-pointer" [ngClass]="{'d-none': isViewMode}" (click)="uploadFence.click()">
                        <i class="fa fa-plus" aria-hidden="true"></i>
                        <p>Image</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>

<app-image-carousel class="d-flex justify-content-center align-items-center" *ngIf="showPopupViewImage"
    [(imageUrlArray)]="imageUrlArray" [(indexOfImage)]="indexOfImage" (closed)="closeView()"></app-image-carousel>
