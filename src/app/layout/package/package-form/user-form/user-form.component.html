<kendo-dialog [width]="1100" [minWidth]="250">
    <div [class.hide-popup]="hidePopup" class="light">
        <form [formGroup]="userForm" novalidate>
            <div class="title-detail center-parent">
                <div class="mr-auto col-md-12">
                    <div class="media-header">
                        <h4 class="d-inline mb-0 text-dark">TẠO MỚI NGƯỜI DÙNG</h4>
                        <span class="action-bar alignment-but cus-but">
                            <button type="submit" class="btn btn-primary ml-2" (click)="onSubmit()" tabindex="44">Lưu &nbsp;
                            </button>
                            <button class="btn btn-secondary ml-2" (click)="close()" tabindex="45">Hủy &nbsp;
                            </button>
                        </span>
                    </div>
                </div>
            </div>
            <hr>
            <div class="d-flex boder-table">
                <div class="w-100  mr-auto">
                    <div class="card-collapse">
                        <div class="header" (click)="isCollapsedUser = !isCollapsedUser" [attr.aria-expanded]="!isCollapsedUser" aria-controls="info-main">
                            <i class="fa fa-caret-down mr-3"></i>Thông tin tài khoản
                        </div>
                        <div class="body" id="info-main" [ngbCollapse]="isCollapsedUser">
                            <table class="w-100 table table-bordered layout-table">
                                <tbody>
                                    <tr>
                                        <td class="w-15 text-right label required no-boder">Tên đăng nhập</td>
                                        <td class="w-35 no-boder">
                                            <input class="w-75 form-control" tabindex="32" autofocus type="text" formControlName="userName" [class.is-invalid]="formErrors.userName">
                                            <div class="invalid-feedback" *ngIf="formErrors.userName">
                                                {{formErrors.userName}}
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="w-15 text-right label required no-boder">Mật khẩu</td>
                                        <td class="w-35 no-boder">
                                            <input class="w-75 form-control" tabindex="33" type="password" formControlName="password" [class.is-invalid]="formErrors.password">
                                            <div class="invalid-feedback" *ngIf="formErrors.password">
                                                {{formErrors.password}}
                                            </div>
                                    </tr>
                                    <tr>
                                        <td class="w-15 text-right label required no-boder">Nhập lại mật khẩu</td>
                                        <td class="w-35 no-boder">
                                            <input class="w-75 form-control" tabindex="34" type="password" formControlName="rePassword" [class.is-invalid]="formErrors.rePassword">
                                            <div class="invalid-feedback" *ngIf="formErrors.rePassword">
                                                {{formErrors.rePassword}}
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="w-15 text-right label no-boder">Nhóm người dùng</td>
                                        <td class="no-boder d-flex">
                                            <span class="custom-dropdown" style="width: 75%; margin-right: 2px;">
                                                <select class="form-control" tabindex="35" formControlName="userGroupId">
                                                    <option [ngValue]="null">---Chọn---</option>
                                                    <option *ngFor="let item of dataGroupUser" [value]="item.id">{{item.text }}</option>
                                                </select>
                                            </span>
                                            <span class="input-group-addon mar-add pointer" style="border-radius: 3px;" (click)="createGroupUser()">
                                                <i class="fa fa-plus"> </i>
                                            </span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="w-15 text-right label no-boder">Hoạt động</td>
                                        <td class="w-35 no-boder">
                                            <div class="center-parent" class="">
                                                <label class="ckb_container">
                                                    <input type="checkbox" [checked]="userForm.get('isActive').value" tabindex="36" formControlName="isActive">
                                                    <span class="checkmark"></span>
                                                </label>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="card-collapse">
                        <div class="header" (click)="isCollapsedUserInfo = !isCollapsedUserInfo" [attr.aria-expanded]="!isCollapsedUserInfo" aria-controls="info-desc">
                            <i class="fa fa-caret-down mr-3"></i>Mô tả chi tiết</div>
                        <div class="body" id="info-desc" [ngbCollapse]="isCollapsedUserInfo">
                            <table class="w-100 table table-bordered">
                                <tbody>
                                    <tr>
                                        <td class="w-15 text-right label required no-boder">Họ</td>
                                        <td class="w-35 no-boder">
                                            <input class="w-75 form-control" tabindex="37" type="text" formControlName="lastName" [class.is-invalid]="formErrors.lastName">
                                            <div class="invalid-feedback" *ngIf="formErrors.lastName">
                                                {{formErrors.lastName}}
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="w-15 text-right label required no-boder">Tên</td>
                                        <td class="w-35 no-boder">
                                            <input class="w-75 form-control" tabindex="38" type="text" formControlName="firstName" [class.is-invalid]="formErrors.firstName">
                                            <div class="invalid-feedback" *ngIf="formErrors.firstName">
                                                {{formErrors.firstName}}
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="w-15 text-right label required no-boder">Email</td>
                                        <td class="w-35 no-boder">
                                            <input class="w-75 form-control" tabindex="39" type="text" formControlName="email" [class.is-invalid]="formErrors.email">
                                            <div *ngIf="submitted && addUser.email.errors" class="invalid-feedback">
                                                <div *ngIf="addUser.email.errors.required">Trường này là bắt buộc nhập</div>
                                                <div *ngIf="addUser.email.errors && !addUser.email.errors.required && submitted && addUser.email.errors.email">Email không đúng định dạng</div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="w-15 text-right label no-boder">Số điện thoại</td>
                                        <td class="w-35 no-boder">
                                            <input class="w-75 form-control" tabindex="40" type="text" formControlName="phoneNumber" [class.is-invalid]="formErrors.phoneNumber">
                                            <div class="invalid-feedback" *ngIf="formErrors.phoneNumber">
                                                {{formErrors.phoneNumber}}
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="w-15 text-right label no-boder">Địa chỉ</td>
                                        <td class="w-35 no-boder">
                                            <input class="w-75 form-control" tabindex="41" type="text" formControlName="address" [class.is-invalid]="formErrors.address">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="w-15 text-right label required no-boder">Phòng ban/Bộ phận</td>
                                        <td class="w-35 no-boder">
                                            <span class="custom-dropdown w-75">
                                                <select class="form-control" tabindex="42" formControlName="departmentId" [class.is-invalid]="formErrors.departmentId">
                                                    <option [ngValue]="null">---Chọn---</option>
                                                    <option *ngFor="let item of departments | async" [value]="item.id">{{item.departmentName }}</option>
                                                </select>
                                            </span>
                                            <div class="invalid-feedback" *ngIf="formErrors.departmentId">
                                                {{formErrors.departmentId}}
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="w-15 text-right label no-boder">Vị trí/Chức vụ</td>
                                        <td class="w-35 no-boder">
                                            <span class="custom-dropdown w-75">
                                                <select class="form-control" tabindex="43" formControlName="levelId">
                                                    <option [ngValue]="null">---Chọn---</option>
                                                    <option *ngFor="let item of positions | async" [value]="item.id">{{item.levelName }}</option>
                                                </select>
                                            </span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <app-group-user-form *ngIf="showPopupAddGroupUser" (closePopupGroupUser)="closePopupGroupUser($event)" (returnNewGroupId)="mapNewGroup($event)"></app-group-user-form>
    <!-- <ng-template #create>
        <div class="light">
            <div class="custom-table-header d-flex justify-content-between padding-title">
                <div class="center-parent" style="font-size: 150% !important; padding-left: 15px">
                    <span>Tạo mới nhóm</span>
                </div>
                <div class="col-md-1">
                    <a class="close pull-right" (click)="closedPopupGroupUser()">
                        <span class="point point-delete" aria-hidden="true">&times;</span>
                    </a>GroupCreate
                </div>
            </div>
            <div class="col-md-12 col-sx-12 ">
                <div class="alert alert-danger mt-2 col-md-12" role="alert" *ngIf="isError">
                    Tên nhóm đã tồn tại trọng hệ thống!
                </div>
            </div>
            <div class="modal-header no-boder-bottom-title">
                <div class="col-md-2 title-name required">
                    Tên
                </div>
                <div class="col-md-10">
                    <textarea class="content-textarea form-control" name="" id="" cols="30" rows="1" [(ngModel)]="GroupCreate.name" [ngClass]="{ 'is-invalid': submittedCreateGroup && !GroupCreate.name }"></textarea>
                    <div class="cus-validate" *ngIf="submittedCreateGroup && !GroupCreate.name">Trường này là bắt buộc nhập</div>
                </div>
            </div>
            <div class="modal-header no-boder-bottom-title">
                <div class="col-md-2 title-name">
                    Mô tả
                </div>
                <div class="col-md-10">
                    <textarea class="content-textarea form-control" name="" id="" cols="30" rows="1" [(ngModel)]="GroupCreate.desc"></textarea>
                </div>
            </div>
            <div class="modal-header no-boder-bottom">
                <div class="col-md-5 form-group">
                    <div class="title-action" for="exampleFormControlSelect2">Danh sách chức năng</div>
                    <select multiple class="form-control form-select" id="exampleFormControlSelect2" style="height: 150px;" (change)="selectEachFieldEditNotUser($event)">
                        <option [value]="notPrivilege.id" *ngFor="let notPrivilege of GroupCreate.notPrivileges">
                            {{notPrivilege.text | translate}}
                        </option>
                    </select>
                </div>
                <div class="col-md-2 group-button">
                    <button type="button" class="btn btn-default btn-next mg-b-2" (click)="selectAllPrivilegesEditUse()">
                        <i class="fa fa-angle-double-right" aria-hidden="true"></i>
                    </button>
                    <button type="button" class="btn btn-default btn-next mg-b-2" (click)="changePrivilegesEditNotUse()">
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </button>
                    <button type="button" class="btn btn-default btn-next mg-b-2" (click)="changePrivilegesEditUse()">
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                    </button>
                    <button type="button" class="btn btn-default btn-next mg-b-2" (click)="selectAllPrivilegesEditNotUse()">
                        <i class="fa fa-angle-double-left" aria-hidden="true"></i>
                    </button>
                </div>
                <div class="col-md-5 form-group">
                    <div class="title-action" for="exampleFormControlSelect2">Chức năng được sử dụng</div>
                    <select multiple class="form-control form-select" id="exampleFormControlSelect2" (change)="selectEachFieldEditUser($event)">
                        <option [value]="privilege.id" *ngFor="let privilege of GroupCreate.privileges">
                            {{privilege.text | translate}}
                        </option>
                    </select>
                </div>
            </div>
            <div class="pd-b20 d-flex justify-content-end">
                <button type="submit" class="btn btn-primary w-80" (click)="addGroupUser();" style="margin-right: 8px">Lưu</button>
                <button type="button" class="btn btn-default w-80" (click)="closedPopupGroupUser()" style="margin-right: 15px">Hủy</button>
            </div>
        </div>
    </ng-template> -->
</kendo-dialog>
