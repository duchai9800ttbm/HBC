<div class="d-flex mb-3">
    <h5 class="mr-auto d-flex align-items-end">Các hoạt động</h5>
    <button *ngIf="!readOnly" class="btn btn-outline-primary ml-2" (click)="gotoCreateEventPage()">
        <i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Thêm sự kiện
    </button>
    <button *ngIf="!readOnly" class="btn btn-outline-primary ml-2" (click)="gotoCreateTaskPage()">
        <i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Thêm công việc
    </button>
</div>

<div>
    <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="stripe row-border hover">
        <thead>
            <tr>
                <th>Tiêu đề</th>
                <th>Loại</th>
                <th>Ngày giờ bắt đầu</th>
                <th>Ngày giờ kết thúc</th>
                <th class="th-mark-status">Trạng thái</th>
                <th>Vị trí</th>
                <th>Phân công cho</th>
                <th class="table-action">Thao tác</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let item of pagedResult.items">
                <td>
                    <a [title]="item.name" [routerLink]="item.activityType=='Event' ? ['/activity/event/detail', item.id] : ['/activity/task/detail', item.id]">
                        {{ item.name }}
                    </a>
                </td>
                <td>{{ item.activityType | translate }}</td>
                <td>{{ item.startDate | date:'dd/MM/yyyy HH:mm' }}</td>
                <td>{{ item.endDate | date:'dd/MM/yyyy HH:mm' }}</td>
                <td class="td-mark-status">
                    <div class="mark-status" [class.status-plan]='item.status=="New"' [class.status-inprogess]='item.status=="Inprogress"'
                    [class.status-not-start]='item.status=="Issued"' [class.status-complete]='item.status=="Completed"'
                    [class.status-cancel]='item.status=="Canceled"' [class.status-pending]='item.status=="Auditing"'>
                        {{ item.status | translate }}
                    </div>
                </td>
                <td class="select-filter" [title]="item.address ">{{ item.address }}</td>
                <td class="select-filter" [title]="item.assignTo">{{ item.assignTo}}</td>
                <td>
                    <a [routerLink]="item.activityType=='Event' ? ['/activity/event/detail', item.id] : ['/activity/task/detail', item.id]">
                        <i class="fa fa-eye text-warning" aria-hidden="true"></i>
                    </a>
                    <a [routerLink]="item.activityType=='Event' ? ['/activity/event/edit', item.id] : ['/activity/task/edit', item.id]" class=" text-success ml-3">
                        <i class="fa fa-pencil  cursor-pointer" aria-hidden="true"> </i>
                    </a>
                    <a class=" text-dark ml-3">
                        <i (click)="delete(item.id, item.activityType)" class="fa fa-trash-o" aria-hidden="true"></i>
                    </a>
                </td>
            </tr>
        </tbody>

    </table>
</div>

<app-pagination [(pagedResult)]="pagedResult" (pagedResultChange)="pagedResultChange($event)"></app-pagination>
<ngx-spinner bdColor="rgba(51, 51, 51, 0.7)" size="medium" color="#fff" type="ball-clip-rotate-multiple"></ngx-spinner>
